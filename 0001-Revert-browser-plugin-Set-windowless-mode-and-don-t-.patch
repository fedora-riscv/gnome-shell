From aae6a3cbbd26b486a28c4204592120feaaa7dc0d Mon Sep 17 00:00:00 2001
From: Michael Catanzaro <mcatanzaro@gnome.org>
Date: Mon, 16 Nov 2015 10:56:13 -0600
Subject: [PATCH] Revert "browser-plugin: Set windowless mode and don't claim
 to need XEmbed"

This reverts commit a52c91e9e5f9c521f6f78a029d85e32564196760.

https://bugzilla.gnome.org/show_bug.cgi?id=758035
---
 browser-plugin/browser-plugin.c | 7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)

diff --git a/browser-plugin/browser-plugin.c b/browser-plugin/browser-plugin.c
index 290b224..e8b5cf6 100644
--- a/browser-plugin/browser-plugin.c
+++ b/browser-plugin/browser-plugin.c
@@ -218,9 +218,6 @@ NPP_New(NPMIMEType    mimetype,
   data = g_slice_new (PluginData);
   instance->pdata = data;
 
-  /* set windowless mode */
-  funcs.setvalue(instance, NPPVpluginWindowBool, NULL);
-
   data->proxy = g_dbus_proxy_new_for_bus_sync (G_BUS_TYPE_SESSION,
                                                G_DBUS_PROXY_FLAGS_NONE,
                                                NULL, /* interface info */
@@ -1051,6 +1048,10 @@ NPP_GetValue(NPP          instance,
     *(NPObject**)value = funcs.createobject (instance, &plugin_class);
     break;
 
+  case NPPVpluginNeedsXEmbed:
+    *(bool *)value = TRUE;
+    break;
+
   default:
     ;
   }
-- 
2.6.3

