From 688c81e1911486fb0c13eb3446ab262de82c7920 Mon Sep 17 00:00:00 2001
From: Colin Walters <walters@verbum.org>
Date: Fri, 26 Mar 2010 16:48:38 -0400
Subject: [PATCH] [build] Link against -lm

Fixes build with http://fedoraproject.org/wiki/Features/ChangeInImplicitDSOLinking
---
 src/Makefile-big.am |    2 +-
 src/Makefile-st.am  |    2 +-
 src/Makefile.am     |    2 +-
 3 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/src/Makefile-big.am b/src/Makefile-big.am
index 613bb19..32a02a9 100644
--- a/src/Makefile-big.am
+++ b/src/Makefile-big.am
@@ -51,7 +51,7 @@ big-enum-types.c: stamp-big-enum-types.h big/big-enum-types.c.in
 
 noinst_LTLIBRARIES += libbig-1.0.la
 
-libbig_1_0_la_LIBADD = $(BIG_LIBS)
+libbig_1_0_la_LIBADD = -lm $(BIG_LIBS)
 libbig_1_0_la_SOURCES = \
 	$(big_source_c) \
 	$(big_source_h) \
diff --git a/src/Makefile-st.am b/src/Makefile-st.am
index 6b06688..d4aae95 100644
--- a/src/Makefile-st.am
+++ b/src/Makefile-st.am
@@ -144,7 +144,7 @@ st_source_c =					\
 
 noinst_LTLIBRARIES += libst-1.0.la
 
-libst_1_0_la_LIBADD = $(ST_LIBS)
+libst_1_0_la_LIBADD = -lm $(ST_LIBS)
 libst_1_0_la_SOURCES =				\
     $(st_source_c)				\
     $(st_source_private_h)			\
diff --git a/src/Makefile.am b/src/Makefile.am
index 4fa20a9..4997c2e 100644
--- a/src/Makefile.am
+++ b/src/Makefile.am
@@ -151,7 +151,7 @@ shell-marshal.c: Makefile shell-marshal.list
 	rm -f xgen-smc
 
 libgnome_shell_la_LDFLAGS = -avoid-version -module
-libgnome_shell_la_LIBADD =	\
+libgnome_shell_la_LIBADD =-lm \
 	$(MUTTER_PLUGIN_LIBS)	\
         $(LIBGNOMEUI_LIBS)      \
 	libbig-1.0.la		\
-- 
1.6.6.1

